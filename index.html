<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shooting Game</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        canvas {
            display: block;
            background-color: #000;
        }
        #gameOver {
            color: red;
            font-size: 48px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            display: none;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <div id="gameOver">U Died :D<br>Final Score: <span id="finalScore">0</span></div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const gameOverText = document.getElementById('gameOver');
        const finalScoreText = document.getElementById('finalScore');
        
        // Set canvas size
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Load images
        const playerImg = new Image();
        const enemyImg = new Image();
        const bulletImg = new Image();
        const backgroundImg = new Image();  // Background image
        const explosionImg = new Image();

        playerImg.src = 'Aircraft.png';    // Replace with your player image path
        enemyImg.src = 'enemies.png';        // Replace with your enemy image path
        bulletImg.src = 'bullets.png';      // Replace with your bullet image path
        backgroundImg.src = 'background1.png';  // Replace with your background image path
        explosionImg.src = 'Explosion.png';

        // Background properties for scrolling
        let backgroundY = 0;
        const backgroundSpeed = 2;

        // Player setup
        const player = {
            x: canvas.width / 2,
            y: canvas.height - 100, // Adjust the starting Y position
            width: 100,
            height: 50,
            speed: 10,
            bullets: [],
            isShooting: false
        };

        // Enemy setup
        const enemies = [];
        const enemySpeed = 3;
        let isGameOver = false;

        // Bullet setup
        const bulletSpeed = 7;
        const bulletWidth = 30;  // Bigger bullet width
        const bulletHeight = 40; // Bigger bullet height


        // Explosion setup
        const explosions = [];
        const explosionDuration = 500;

        // Score setup
        let score = 0;

        // Control player movement and shooting
        let keys = {};
        document.addEventListener('keydown', (e) => {
            keys[e.code] = true;
        });
        document.addEventListener('keyup', (e) => {
            keys[e.code] = false;
        });

        // Collision detection between player and enemies
        function checkCollision(rect1, rect2) {
            const margin = 10;
            return  rect1.x + margin < rect2.x + rect2.width - margin &&
                    rect1.x + rect1.width - margin > rect2.x + margin &&
                    rect1.y + margin < rect2.y + rect2.height - margin &&
                    rect1.y + rect1.height - margin > rect2.y + margin;

        }

        // Game loop
        function gameLoop() {
            if (isGameOver) return; // Stop game loop if game is over

            // Move background for a scrolling effect
            backgroundY += backgroundSpeed;
            if (backgroundY >= canvas.height) {
                backgroundY = 0;
            }

            // Draw background image (looped)
            ctx.drawImage(backgroundImg, 0, backgroundY, canvas.width, canvas.height);
            ctx.drawImage(backgroundImg, 0, backgroundY - canvas.height, canvas.width, canvas.height);

            // Draw player image
            ctx.drawImage(playerImg, player.x, player.y, player.width, player.height);

            // Move player horizontally and vertically
            if (keys['ArrowLeft'] && player.x > 0) {
                player.x -= player.speed;
            }
            if (keys['ArrowRight'] && player.x < canvas.width - player.width) {
                player.x += player.speed;
            }
            if (keys['ArrowUp'] && player.y > 0) {  // Move up
                player.y -= player.speed;
            }
            if (keys['ArrowDown'] && player.y < canvas.height - player.height) {  // Move down
                player.y += player.speed;
            }

            // Shoot bullets
            if (keys['Space'] && !player.isShooting) {
                player.bullets.push({ 
                    x: player.x + player.width / 2 - bulletWidth / 2,  // Centered bullet
                    y: player.y, 
                    width: bulletWidth, 
                    height: bulletHeight 
                });
                player.isShooting = true;
            }
            if (!keys['Space']) {
                player.isShooting = false;
            }

            // Move bullets and draw bullet image
            for (let i = 0; i < player.bullets.length; i++) {
                const bullet = player.bullets[i];
                bullet.y -= bulletSpeed;
                ctx.drawImage(bulletImg, bullet.x, bullet.y, bullet.width, bullet.height);

                // Remove bullets that go off screen
                if (bullet.y < 0) {
                    player.bullets.splice(i, 1);
                    i--;
                }
            }

            // Spawn enemies
            if (Math.random() < 0.02) {
                const randomWidth = Math.random() * (100 - 60) + 60;  // Random width between 60 and 100
                const randomHeight = Math.random() * (100 - 60) + 60; // Random height between 60 and 100
                enemies.push({ 
                    x: Math.random() * (canvas.width - randomWidth), 
                    y: 0, 
                    width: randomWidth, 
                    height: randomHeight 
                });
            }

            // Move enemies and draw enemy image
            for (let i = 0; i < enemies.length; i++) {
                const enemy = enemies[i];
                enemy.y += enemySpeed;
                ctx.drawImage(enemyImg, enemy.x, enemy.y, enemy.width, enemy.height);

                // Check if enemies go off screen
                if (enemy.y > canvas.height) {
                    enemies.splice(i, 1);
                    i--;
                }

                // Check collision between player and enemy
                if (checkCollision(player, enemy)) {
                    gameOver();
                    return;
                }
            }

            // Bullet-enemy collision
            for (let i = 0; i < player.bullets.length; i++) {
                const bullet = player.bullets[i];
                for (let j = 0; j < enemies.length; j++) {
                    const enemy = enemies[j];
                    if (checkCollision(bullet, enemy)) {
                        createExplosion(enemy.x, enemy.y, enemy.width, enemy.height);
                        score += 10;
                        // Remove bullet and enemy on collision
                        player.bullets.splice(i, 1);
                        enemies.splice(j, 1);
                        i--;
                        break;
                    }
                }
            }

            for (let i = 0; i < explosions.length; i++) {
                const explosion = explosions[i];
                ctx.drawImage(explosionImg, explosion.x, explosion.y, explosion.width, explosion.height);

                // Remove explosion after duration
                if (Date.now() - explosion.startTime > explosionDuration) {
                    explosions.splice(i, 1);
                    i--;
                }
            }


            // Draw the score
            ctx.fillStyle = "white";
            ctx.font = "30px Arial";
            ctx.fillText("Score: " + score, 10, 30);

            // Loop game
            requestAnimationFrame(gameLoop);
        }


        // Create explosion at specific position
        function createExplosion(x, y, width, height) {
            explosions.push({
                x: x,
                y: y,
                width: width,
                height: height,
                startTime: Date.now()
            });
        }

        // Game over function
        function gameOver() {
            isGameOver = true;
            finalScoreText.textContent = score;
            gameOverText.style.display = 'block'; // Show Game Over message
        }

        // Start game loop when images are loaded
        backgroundImg.onload = () => {
            gameLoop();
        };
    </script>
</body>
</html>
